<launch>
  <node pkg="gps_common" type="utm_odometry_node" name="GPS2UTM" >
  <remap from="/odom" to="/UTM"/>
  </node>
  <node pkg="navigation" type="map_base_tf_node" name="map_base_transform_publisher" />
  <node pkg="navigation" type="message_converter" name="deploy_adaper" />
  <include file="$(find agbot_bringup)/launch/static_tf.launch" />


  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find navigation)/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find navigation)/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find navigation)/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find navigation)/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find navigation)/base_local_planner_params.yaml" command="load" />
    <!-- LOAD COSTMAP_CONVERTER PARAMETERS HERE -->
    <rosparam file="$(find navigation)/costmap_converter_params.yaml" command="load" />
    <rosparam file="$(find navigation)/sbpl_global_params.yaml" command="load" />
    <param name="base_global_planner" value="SBPLLatticePlanner" />
    <param name="SBPLLatticePlanner/primitive_filename" value="$(find navigation)/agbot.mprim" />

    <param name="base_local_planner" value="teb_local_planner/TebLocalPlannerROS" />
    <param name="controller_frequency" value="10.0" />
 
		<param name="planner_frequency" value="0.2" />
    <param name="planner_patience" value="5.0" />
    <!-- <param name="use_dijkstra" value="True" /> -->

 </node>

   <node pkg="wp_publisher" type="wp_publisher_pub" name="waypoint_publisher" />
    <node pkg="wp_publisher" type="wp_publisher_viz" name="waypoint_viz_and_receiver" /> 


   <!-- <node name="speed_pid" pkg="pid" type="controller" >
      <param name="Kp" value="25" />
      <param name="Ki" value="1" />
      <param name="Kd" value="35" />
      <node name="speed_pid" pkg="pid" type="controller" >
      <param name="Kp" value="5.0" />
      <param name="Ki" value="0.1" />
      <param name="Kd" value="0.01" />
      <param name="topic_from_controller" value="pedal_effort" />
      <param name="topic_from_plant" value="speed_feedback" />
      <param name="setpoint_topic" value="speed_setpoint" />
      <param name="upper_limit" value="100" />
      <param name="lower_limit" value="-100" />
      <param name="windup_limit" value="10" />
      <param name="max_loop_frequency" value="100.0" />
      <param name="min_loop_frequency" value="100.0" />
    </node> -->

  <!-- <node pkg="rviz" type="rviz" name="rviz"
    args="-d $(find agbot_bringup)/launch/agbot_rivz.rviz"/> -->

</launch>
